<h1>Newspapers</h1>

<div class="newspapers listing">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th colspan="4">Actions</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
        <% @documents.each do |document| %>
        <tr>
          <td class="title"><%= document.id %>: <%= document.name %></td>
          <td class="action"><%= link_to("Edit", edit_document_path(document.id)) %></td>
          <td class="action">
            <% if document.pdf %>
              <%= link_to("Download", document_download_path(document), 
                          download: true, 
                          "data-pdf-id" => document.pdf.id,
                          class: "pdf-download") %>
            <% end %>
          </td>
          <td class="action"><%= link_to("Generate", document_generate_path(document.id), method: :post, remote: true) %></td>
          <td class="action"><%= link_to("Delete", document, :method => :delete, :confirm => "Are you sure ?") %></td>
          <td class="status">
            <%= react_component("PdfStatus", 
              {
                document_id: document.id, 
                pdf_id: document.try(:pdf).try(:id), 
                pdf_status: document.try(:pdf).try(:status)
            }) %>
          </td>
      <% end %>
    </tbody>
  </table>
</div>